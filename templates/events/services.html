{% extends 'base.html' %}
{% load static %}

{% block title %}Services - Sweetest Promises{% endblock %}

{% block content %}
<section>
  <h1>Services</h1>

  <!-- Category Filter -->
  <form method="get">
    <select name="category" onchange="this.form.submit()">
      <option value="">All Categories</option>
      {% for c in categories %}
        <option value="{{ c.id }}" {% if selected == c.id %}selected{% endif %}>
          {{ c.name }}
        </option>
      {% endfor %}
    </select>
  </form>

  <!-- Services Grid -->
  <div class="grid">
    {% for s in services %}
      <article class="card">
        {% if s.image %}
          <img src="{{ s.image.url }}" alt="{{ s.title }}" class="service-img">
        {% else %}
          <img src="{% static 'core/img/placeholder.jpg' %}" alt="{{ s.title }}" class="service-img">
        {% endif %}
        <h3>{{ s.title }}</h3>
        <p class="muted">{{ s.description|truncatechars:140 }}</p>
        <p>
          <a class="btn" href="{% url 'events:service_detail' s.pk %}">View</a>
          <a class="btn primary" href="{% url 'events:book_service' s.pk %}">Book Now</a>
        </p>
      </article>
    {% empty %}
      <p>No services yet.</p>
    {% endfor %}
  </div>
</section>

<style>
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .card {
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    padding: 1rem;
    text-align: center;
  }

  .service-img {
    width: 100%;
    height: 220px;        /* same height for all images */
    object-fit: cover;    /* crop but keep aspect ratio */
    border-radius: 8px;
    margin-bottom: 1rem;
  }

  .btn {
    display: inline-block;
    margin: 0.25rem;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    background: #eee;
    text-decoration: none;
    color: #333;
    font-size: 0.9rem;
  }

  .btn.primary {
    background: #ff5ca2;
    color: white;
  }

  .muted {
    color: #666;
    font-size: 0.9rem;
    margin: 0.5rem 0 1rem;
  }
</style>
{% endblock %}
